!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o=e();for(var r in o)("object"==typeof exports?exports:t)[r]=o[r]}}(self,(function(){return function(){var t={946:function(){Date.prototype.formatting=function(t){var e=this.getFullYear().toString();t=t.replace(/yyyy/g,e);var o=(this.getMonth()+1).toString();t=t.replace(/mm/g,o[1]?o:"0"+o[0]);var r=this.getDate().toString();t=t.replace(/dd/g,r[1]?r:"0"+r[0]);var i=this.getHours().toString();t=t.replace(/hh/g,i[1]?i:"0"+i[0]);var l=this.getMinutes().toString();t=t.replace(/ii/g,l[1]?l:"0"+l[0]);var a=this.getSeconds().toString();return t.replace(/ss/g,a[1]?a:"0"+a[0])},CanvasRenderingContext2D.prototype.roundRect=function(t,e,o,r,i){return o<2*i&&(i=o/2),r<2*i&&(i=r/2),this.beginPath(),this.moveTo(t+i,e),this.arcTo(t+o,e,t+o,e+r,i),this.arcTo(t+o,e+r,t,e+r,i),this.arcTo(t,e+r,t,e,i),this.arcTo(t,e,t+o,e,i),this.closePath(),this},CanvasRenderingContext2D.prototype.bezierCurveMulti=function(t,e){e=e||.25;var o=t.length;if(!(o<2)){if(2==o)return this.moveTo(t[0][0],t[0][1]),this.lineTo(t[1][0],t[1][1]),this;var r=[];t.forEach((function(){r.push({})}));for(var i=1;i<o-1;i++){var l=t[i],a=t[i-1],s=t[i+1],n=s[0]-a[0],h=s[1]-a[1],d=S(n,h),f=n/d,c=h/d,g=S(l[0]-a[0],l[1]-a[1]),u=S(l[0]-s[0],l[1]-s[1]),p=l[0]-f*g*e,x=l[1]-c*g*e,y=l[0]+f*u*e,b=l[1]+c*u*e;r[i]={cp:[p,x],cn:[y,b]}}for(r[0]={cn:[(t[0][0]+r[1].cp[0])/2,(t[0][1]+r[1].cp[1])/2]},r[o-1]={cp:[(t[o-1][0]+r[o-2].cn[0])/2,(t[o-1][1]+r[o-2].cn[1])/2]},this.moveTo(t[0][0],t[0][1]),i=1;i<o;i++){var v=t[i],m=r[i],w=r[i-1];this.bezierCurveTo(w.cn[0],w.cn[1],m.cp[0],m.cp[1],v[0],v[1])}return this}function S(t,e){return Math.sqrt(t*t+e*e)}}}},e={};function o(r){var i=e[r];if(void 0!==i)return i.exports;var l=e[r]={exports:{}};return t[r](l,l.exports,o),l.exports}o.d=function(t,e){for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return function(){"use strict";o.r(r),o.d(r,{Donut:function(){return x},Funnel:function(){return w},Pie:function(){return y},Plot:function(){return g},Radar:function(){return v},Spectr:function(){return P},default:function(){return T}}),o(946);const t=t=>t.reduce((function(t,e){return e.replace(/^#/,"").match(/.{2}/g).map((function(e,o){return t[o]+parseInt(e,16)}))}),[0,0,0]).reduce((function(e,o){return e+((r=Math.floor(o/t.length).toString(16)).length<2&&(r="0"+r),r);var r}),"#"),e=(t,o)=>{for(var r in o)try{o[r].constructor==Object?t[r]=e(t[r],o[r]):t[r]=o[r]}catch(e){t[r]=o[r]}return t},i=t=>{if("object"!=typeof t)return t;if(!t)return t;var e=t instanceof Array?[]:{};for(var o in t)t.hasOwnProperty(o)&&(e[o]=i(t[o]));return e},l=()=>{for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},a=(t,e,o,r)=>({x:t+Math.cos(r)*o,y:e+Math.sin(r)*o}),s=(t,e)=>(e=parseInt(e),"#"+t.replace(/^#/,"").replace(/../g,(t=>("0"+Math.min(255,Math.max(0,parseInt(t,16)+e)).toString(16)).substr(-2)))),n=t=>{if(4===t.length){let e="#";for(let o=1;o<=t.length-1;o++)e+=t[o]+t[o];t=e}return t},h=({x:t,y:e,polygon:o})=>{for(var r=!1,i=0,l=o.length-1;i<o.length;l=i++){var a=o[i].x,s=o[i].y,n=o[l].x,h=o[l].y;s>e!=h>e&&t<(n-a)*(e-s)/(h-s)+a&&(r=!r)}return r};var d={offset:{top:20,right:20,bottom:40,left:60},grid:{enable:!0,offset:{top:20,right:0,bottom:20,left:0},styles:{background:"",borderColor:"#2b2a49",borderRadius:5,borderWidth:2},horizontal:{step:4,enable:!0},vertical:{step:10,enable:!0}},labels:{enable:!0,styles:{color:"#fff",fontSize:12}},values:{enable:!0,digits:2,count:10,styles:{color:"#fff",fontSize:12}},data:{enable:!0,offset:0,digits:2,line:{offset:{left:0,top:0,right:0,bottom:0},dots:{enable:!0,width:5,hover:{enable:!0,width:3}},styles:{lineWidth:2}},bar:{offset:10,hover:{enable:!0,value:50}}}},f={animated:!0,view:{styles:{background:"#1a1e30"}},data:{hover:{enable:!0}},tooltip:{enable:!0,styles:{color:"#ffffff",background:"#403f4c",borderColor:"#fff",borderWidth:0,borderRadius:3,fontSize:12,padding:{top:10,right:10,bottom:10,left:10}}}};class c{constructor(t){let{canvas:o=!1,data:r={},defaultSettings:l={},settings:a={},actions:s={},type:n}=t;this.type=n,this.actions=s,this.canvas={element:o,context:o.getContext("2d"),isCanvas:(o instanceof Element||o instanceof HTMLDocument)&&"canvas"===o.tagName.toLowerCase()},this.cursor={x:0,y:0},this.settings=e(i(f),i(l)),this.timeStamp=+new Date,this.setSettings(a),this.state={loading:this.settings.animated?0:1},this.data=this.prepareData(r),this.commonInit()}prepareData(t){return t}setSettings(t={}){e(this.settings,t),this.render({from:"setSettings"})}getSettings(){return this.settings}setData(t){this.data=this.prepareData(t),this.render({from:"setData"})}getData(){return this.data}setRatio(){let{canvas:t}=this,{context:e,element:o}=t,r=window.devicePixelRatio||1;o.width=o.clientWidth*r,o.height=o.clientHeight*r,e.scale(r,r)}clearCanvas(){let{canvas:t}=this,{context:e,element:o}=t;e.clearRect(0,0,t.width,t.height)}loading(){this.state.loading>=1||setTimeout((()=>{this.state.loading+=.03,this.state.loading=this.state.loading>1?1:this.state.loading,this.render({from:"loading"}),this.loading()}),1e3/60)}commonInit(){this.render({from:"commonInit"}),this.loading(),this.commonListeners()}commonListeners(){let{canvas:t}=this,{context:e,element:o}=t;window.addEventListener("resize",(()=>{this.render({from:"resize"})})),o.addEventListener("mousemove",(t=>{let{settings:e}=this,r=o.getBoundingClientRect(),i=t.clientX-r.left,l=t.clientY-r.top;this.cursor={x:i,y:l},this.render({from:"mousemove"})})),o.addEventListener("mouseout",(t=>{this.cursor={x:0,y:0},this.render({from:"mouseout"})}))}drawTooltip({title:t="",panels:e=[],x:o,y:r,render:i}={}){let{canvas:l,settings:a,data:n=[],cursor:h}=this,{element:d,context:f}=l,{tooltip:c}=a,{styles:g}=c;if(o||(o=h.x),r||(r=h.y),c&&c.enable){f.font="100 "+g.fontSize+"px arial",f.textAlign="left",f.textBaseline="middle";let{width:l,height:a}=(()=>{let o=0,r=0;t&&t.text?(t.width=f.measureText(t.text).width+g.padding.left+g.padding.right+g.borderWidth,t.height=2*g.padding.top+1.286*g.fontSize+g.borderWidth/2,t.x=g.padding.left+g.borderWidth/2,t.y=t.height/2+g.borderWidth/2):t={width:0,height:0},e.length&&e.forEach(((o,r)=>{if(o.width=0,o.height=0,o.x=(()=>{let t=0;for(let o=r-1;o>=0;o--)t+=e[o].width;return t})(),o.y=t.height,o.colorPanel&&o.colorPanel.color&&(o.colorPanel.height=3,o.colorPanel.x=g.borderWidth/2,o.colorPanel.y=0,o.height+=o.colorPanel.height),o.texts&&o.texts.forEach(((t,e)=>{if(t.text){let r=f.measureText(t.text).width+g.borderWidth;o.width<r&&(o.width=r),t.height=1.286*g.fontSize,t.x=g.padding.left+g.borderWidth/2,t.y=o.height+t.height/2,e||(t.height+=g.padding.top,t.y+=g.padding.top),e===o.texts.length-1&&(t.height+=g.padding.bottom),o.height+=t.height}})),o.footer&&o.footer.text){let t=f.measureText(o.footer.text).width+g.borderWidth;o.width<t&&(o.width=t),o.footer.height=g.padding.bottom+1.286*g.fontSize,o.footer.x=g.padding.left+g.borderWidth/2,o.footer.y=o.height+o.footer.height/2-g.padding.bottom/2,o.height+=o.footer.height+g.borderWidth/2}o.width+=g.padding.left+g.padding.right}));let i=e.reduce(((t,e)=>t+e.width),0);if(t.width>i){let o=t.width/e.length,r=0,i=0;for(let t=0;t<=e.length-1;t++)e[t].width>=o?i+=e[t].width-o:r++;for(let t=0;t<=e.length-1;t++)e[t].width=e[t].width<o?o-i/r:e[t].width,e[t].x=(()=>{let o=0;for(let r=t-1;r>=0;r--)o+=e[r].width;return o})()}return r=t.height+(e.length?Math.max(...e.map((t=>t.height))):0),o=Math.max(t.width,i),{width:o,height:r}})(),n=o,h=10,c=o-l/2,p=!1,x=r-a-h;x<g.borderWidth&&(p=!0,x=r+h),c+l>d.clientWidth-g.borderWidth/2&&(c=d.clientWidth-l-g.borderWidth/2),c<g.borderWidth/2&&(c=g.borderWidth/2),f.fillStyle=g.background,f.strokeStyle=g.borderWidth>0?g.borderColor:"transparent",f.lineWidth=g.borderWidth,f.beginPath(),f.roundRect(c,x,l,a,g.borderRadius),f.closePath(),f.fill(),f.stroke(),p?(f.beginPath(),f.moveTo(n-5,x),f.lineTo(n,x-5),f.lineTo(n+5,x),f.fill(),f.stroke(),f.beginPath(),f.moveTo(n-5+g.borderWidth/4,x+g.borderWidth/2),f.lineTo(n,x-5+g.borderWidth/1.5),f.lineTo(n+5-g.borderWidth/4,x+g.borderWidth/2),f.fill()):(f.beginPath(),f.moveTo(n-5,x+a),f.lineTo(n,x+a+5),f.lineTo(n+5,x+a),f.fill(),f.stroke(),f.beginPath(),f.moveTo(n-5+g.borderWidth/4,x+a-g.borderWidth/2),f.lineTo(n,x+a+5-g.borderWidth/1.5),f.lineTo(n+5-g.borderWidth/4,x+a-g.borderWidth/2),f.fill()),f.fillStyle=g.color,t&&t.text&&f.fillText(t.text,c+t.x,x+t.y),e.forEach((t=>{f.fillStyle=g.color,t.colorPanel&&t.colorPanel.color&&(f.save(),f.fillStyle=t.colorPanel.color,f.beginPath(),f.rect(c+t.x+t.colorPanel.x,x+t.y+t.colorPanel.y,t.width-g.borderWidth,t.colorPanel.height),f.fill(),f.restore()),t.texts&&t.texts.forEach(((e,o)=>{e.text&&f.fillText(e.text,c+t.x+e.x,x+t.y+e.y)})),t.footer&&t.footer.text&&(f.fillStyle=s(g.color,-50),f.fillText(t.footer.text,c+t.x+t.footer.x,x+t.y+t.footer.y))})),i&&(u=i,"[object Function]"==={}.toString.call(u))&&i({context:f,styles:g,box:{width:l,height:a,top:x,left:c,bottom:x+a,right:c+l}})}var u}drawBackground(){let{canvas:t,settings:e}=this,{view:o}=e,{context:r,element:i}=t,{background:l}=o.styles;r.fillStyle=l,r.fillRect(0,0,i.width,i.height)}hover({item:t,isHovered:e}){let{settings:o}=this;e&&o?.data?.hover?.enable?(t.hasOwnProperty("state")||(t.state=0),o?.data?.hover?.value,o.animated?t.state<1&&(t.state+=.05,t.state>1&&(t.state=1),this.render({from:"Animated increase state"})):(t.state=1,this.render({from:"Increase state"}))):o.animated?t.state>0&&(t.state-=.05,t.state<0&&(t.state=0),this.render({from:"Animated decrease state"})):(t.state=0,this.render({from:"Decrease state"}))}baseRender(){this.setRatio(),this.clearCanvas(),this.drawBackground()}}class g extends c{constructor(t){t.defaultSettings=d,super(t)}prepareData(t){let e=Math.max(...t.datasets.map((t=>(t.values||[]).length)));[...t.datasets.map((t=>t.values))].map(((t,o)=>{if(t.length<e){let r=e-t.length-1;for(let e=0;e<=r;e++)t.push(o?0:"")}})),t.datasets.forEach((t=>{t.color||(t.color=l()),t.color=n(t.color),t.values.forEach(((e,o)=>{t.values[o]={name:t.name,color:n(t.color),index:o,value:e,state:0}}))})),t.labels.forEach(((e,o)=>{t.labels[o]={text:e}}));let o=t.datasets.filter((t=>"bar"===t.type));if(o.forEach(((t,e)=>{t.count=o.length,t.index=e+1})),o.length){this.settings.data.initialValue=0;let t=this.getDrawRect("bar"),o=(t.left,t.width/e);this.settings.data.line.offset.left=o/2,this.settings.data.line.offset.right=o/2}return t}getInterpolation(t,e){let{canvas:o,settings:r}=this,{data:i,offset:l,grid:a}=r,{element:s,context:n}=o,{line:h}=i,{lineWidth:d}=h.styles,f=Math.max(...e),c=Math.min(...e),g=l.top+a.offset.top+a.styles.borderWidth,u=100*(t*this.state.loading-c*(c>0?this.state.loading:1))/(f-c)/100,p=s.clientHeight-l.top-a.offset.top-l.bottom-a.offset.bottom-2*a.styles.borderWidth;return g+p-p*u}drawGrid(){let{canvas:t,settings:e}=this,{grid:o,offset:r}=e,{element:i,context:l}=t,{enable:a,horizontal:s,vertical:n,styles:h}=o;if(!a)return;l.save();let d=0+r.left,f=i.clientWidth-r.right-r.left,c=0+r.top,g=i.clientHeight-r.bottom-r.top;if(l.lineWidth=h.borderWidth,l.strokeStyle=h.borderColor,l.fillStyle=h.background,h.dash&&l.setLineDash(h.dash),l.beginPath(),l.roundRect(d,c,f,g,h.borderRadius),l.fill(),l.closePath(),l.stroke(),l.restore(),s&&s.enable){l.save();let t=[],e=(i.clientHeight-r.top-r.bottom)/(s.step+1),a=(i.clientHeight-r.top-r.bottom)/s.step,n=r.top,d={...h,...s.styles||{}};if("px"===(s.type||o.type))for(let e=1;e<a;e++){let o=n+e*s.step;t.push(o)}else for(let o=1;o<s.step+1;o++){let r=n+o*e;t.push(r)}l.lineWidth=d.borderWidth,l.strokeStyle=d.borderColor,d.dash&&l.setLineDash(d.dash);for(let e=0;e<=t.length-1;e++)l.beginPath(),l.lineTo(0+r.left,t[e]),l.lineTo(i.clientWidth-r.right,t[e]),l.stroke();l.restore()}if(n&&n.enable){l.save();let t=[],e=(i.clientWidth-r.right-r.left)/(n.step+1),a=(i.clientWidth-r.right-r.left)/n.step,s=r.left,d={...h,...n.styles||{}};if("px"===(n.type||o.type))for(let e=1;e<a;e++){let o=s+e*n.step;t.push(o)}else for(let o=1;o<n.step+1;o++){let r=s+o*e;t.push(r)}l.lineWidth=d.borderWidth,l.strokeStyle=d.borderColor,d.dash&&l.setLineDash(d.dash);for(let e=0;e<=t.length-1;e++)l.beginPath(),l.lineTo(t[e],0+r.top),l.lineTo(t[e],i.clientHeight-r.bottom),l.stroke();l.restore()}l.restore()}drawLabels(){let{canvas:t,settings:e,data:o}=this,{labels:r,offset:i,grid:l}=e,{element:a,context:s}=t,{enable:n,styles:h}=r;if(!n)return;let d=this.getDrawRect("line"),f=d.left,c=d.width/(o.labels.length-1),g=a.clientHeight-i.bottom/2;o.labels.forEach(((t,e)=>{let o=f+(c?c*e:0);s.font="100 "+h.fontSize+"px arial",s.fillStyle=h.color,s.textAlign="center",s.textBaseline="middle",t.xStart=o-c/2,t.xEnd=o+c/2,s.fillText(t.text,o,g)}))}getDatasets(){let{data:t}=this;return t.datasets}getAllValues(){let{data:t}=this.settings,e=[];return(t.initialValue||0===t.initialValue)&&e.push(t.initialValue),this.getDatasets().reduce(((t,e)=>[...t,...e.values.map((t=>t.value))]),e)}drawValues(){let{canvas:t,settings:e}=this,{values:o,offset:r,grid:i}=e,{element:l,context:a}=t,{enable:s,styles:n,digits:h}=o;if(!s)return;let d=r.left/2,f=this.getAllValues(),c=Math.max(...f),g=Math.min(...f);a.font="100 "+n.fontSize+"px arial",a.fillStyle=n.color,a.textAlign="center",a.textBaseline="middle";let{count:u}=o,p=[],x=(c-g)/(u-1);for(let t=0;t<=u-1;t++){let e=c-x*t;p.push({value:0===t?c:t===u-1?g:e,x:d,y:this.getInterpolation(e,f)})}p.forEach((t=>{a.fillText(t.value.toFixed(h),t.x,t.y)}))}drawData(){let{settings:t}=this,{data:e}=t,{enable:o}=e,r=this.getDatasets();o&&(r.filter((t=>"bar"===t.type)).forEach((t=>{let{type:e}=t;e=e.toUpperCase(),this["draw"+e]&&this["draw"+e](t)})),r.filter((t=>"line"===t.type||"dot"===t.type)).forEach((t=>{let{type:e}=t;e=e.toUpperCase(),this.drawLINE&&this.drawLINE(t)})))}getDrawRect(t){let{canvas:e,settings:o}=this,{offset:r,grid:i,data:l}=o,{element:a,context:s}=e,n={top:r.top+i.styles.borderWidth,left:r.left+i.styles.borderWidth,right:r.right+i.styles.borderWidth,bottom:r.bottom-i.styles.borderWidth,width:a.clientWidth-r.left-r.right-2*i.styles.borderWidth,height:a.clientHeight-r.top-r.bottom-2*i.styles.borderWidth},h={top:n.top+i.offset.top,left:n.left+i.offset.left,right:n.right+i.offset.right,bottom:n.bottom-i.offset.bottom,width:n.width-i.offset.left-i.offset.right,height:n.height-i.offset.top-i.offset.bottom},d={view:n,grid:h,bar:h,line:{...h,left:h.left+l.line.offset.left,right:h.right+l.line.offset.right,width:h.width-l.line.offset.left-l.line.offset.right}};return t&&d[t]?d[t]:d}drawLINE(t,e){let{canvas:o,settings:r}=this,{data:i,offset:l,grid:a}=r,{element:n,context:h}=o,{line:d}=i,{lineWidth:f}=d.styles,{values:c,color:g}=t,u=this.getDrawRect("line"),p=this.getDrawRect("view"),x=u.left,y=u.width/(1===c.length?1:c.length-1);c.forEach(((t,e)=>{let o=x+y*e,r=this.getInterpolation(t.value,this.getAllValues());t.x=o,t.y=r,t.isFirst=!e,t.isLast=e===c.length-1,t.area={xStart:t.isFirst?p.left:o-y/2,yStart:u.top,xEnd:t.isLast?n.clientWidth-p.right:o+y/2,yEnd:u.top+u.height},this.checkIsHovered(t)})),"line"===t.type&&(h.strokeStyle=t.color,h.lineWidth=f,h.lineJoin="round",h.beginPath(),c.forEach(((t,e)=>{this.checkIsHovered(t),e?h.lineTo(t.x,t.y):h.moveTo(t.x,t.y)})),h.stroke()),("dot"===t.type||d?.dots?.enable)&&(h.fillStyle=t.color,h.strokeStyle=s(t.color,-50),c.forEach(((t,e)=>{h.beginPath(),h.arc(t.x,t.y,d.dots.width+(d.dots.hover.enable?d.dots.hover.width*t.state:0),0,2*Math.PI),h.fill(),h.closePath(),h.stroke()})))}drawBAR(t,e){let{canvas:o,settings:r,cursor:i}=this,{data:l}=r,{element:a,context:n}=o,{bar:h}=l,{values:d}=t,f=this.getDrawRect("bar"),c=this.getDrawRect("view"),g=f.left,u=f.width/d.length;l.line.offset.left=u/2,l.line.offset.right=u/2,d.forEach(((e,o)=>{e.isFirst=!o,e.isLast=o===d.length-1,n.beginPath();let r=s(t.color,h?.hover?.enable?h.hover.value*e.state:1);n.strokeStyle=r,n.fillStyle=r;let i=u/t.count-h.offset/t.count,l=g+h.offset/2+u*o+i*(t.index-1),p=l,x=l+i,y=this.getInterpolation(e.value,this.getAllValues()),b=this.getInterpolation(0,this.getAllValues());e.area={xStart:e.isFirst?c.left:g+u*o,yStart:f.top,xEnd:e.isLast?a.clientWidth-c.right:g+u*o+i*t.count+h.offset,yEnd:f.top+f.height},this.checkIsHovered(e),n.moveTo(p,b),n.lineTo(p,y),n.lineTo(x,y),n.lineTo(x,b),n.fill()}))}checkIsHovered(t){let{cursor:e}=this,{area:o}=t,r=e.x>=o.xStart&&e.x<o.xEnd&&e.y>=o.yStart&&e.y<o.yEnd;return t.isHovered=r,super.hover({item:t,isHovered:r}),r}drawTooltip(){let{settings:t,data:e,cursor:o}=this,r=e.datasets.map((t=>t.values.filter((t=>t.isHovered))));if(r=r.reduce(((t,e)=>[...t,...e]),[]),!r.length)return;let i=e.labels.filter((t=>t.xStart<=o.x&&t.xEnd>=o.x)),l=i[i.length-1];super.drawTooltip({title:{text:l?.text||""},panels:r.map((e=>({colorPanel:{color:e.color},texts:[{text:"Value: "+e.value.toFixed(t.data.digits)}],footer:{text:e.name}}))),render:t=>{}})}render(t={}){this.renderTimeout&&clearTimeout(this.renderTimeout),this.renderTimeout=setTimeout((()=>{super.baseRender(),this.drawGrid(),this.drawLabels(),this.drawData(),this.drawValues(),this.drawTooltip()}),5)}}var u={offset:{top:30,right:30,bottom:30,left:30},data:{volumed:!0,hover:{value:20},styles:{width:80,color:"#fff"}},texts:{center:{enable:!1,text:"100%",styles:{color:"#ffffff",fontSize:30}},slicePercent:{enable:!1,styles:{color:"#ffffff",fontSize:10}}}};class p extends c{constructor(t){t.defaultSettings=u,super(t)}prepareData(t=[]){let e=(t=t.filter((t=>t.value>0))).reduce(((t,e)=>t+(parseFloat(e.value)||0)),0);return t.forEach((t=>{t.percent=100/e*t.value,t.total=e,t.color=t.color||l(),t.state=t.state||0})),t}generatePolygon({count:t=20,x:e,y:o,radius:r,sliceWidth:i,startPi:l,endPi:s}){let n=[],h=(s-l)/t;h=isFinite(h)?h:0;for(let s=0;s<=t;s++)n.push(a(e,o,r+i/2,l+h*s));for(let l=0;l<=t;l++)n.push(a(e,o,r-i/2,s-h*l));return n}drawSlices(){let t,e,{canvas:o,settings:r,data:i,cursor:l,type:n,state:d}=this,{context:f,element:c}=o,g=Math.min(c.clientHeight-r.offset.top-r.offset.bottom-("donut"===n?r.data.styles.width:0),c.clientWidth-r.offset.left-r.offset.right-("donut"===n?r.data.styles.width:0))*d.loading,u=c.clientWidth/2+r.offset.left-r.offset.right,p=c.clientHeight/2+r.offset.top-r.offset.bottom,{volumed:x}=r.data,y=-Math.PI/2;"pie"===n&&(t=g/2,e=g/4),"donut"===n&&(t=r.data.styles.width>=g?g:r.data.styles.width,e=g/2);for(let o=0;o<=i.length-1;o++){let a=y,c=2*Math.PI*d.loading*i[o].percent/100+y,g=r.data.hover.value*i[o].state;i[o].startPi=a,i[o].endPi=c,y=c;let b=this.generatePolygon({x:u,y:p,radius:e+g/2,sliceWidth:t+g,startPi:a,endPi:c}),v=h({x:l.x,y:l.y,polygon:b});i[o].polygon=b,i[o].hovered=v,super.hover({item:i[o],isHovered:i[o].hovered});let m=[];if(m.push({radius:e+g/2,width:t+g,color:s(i[o].color,g),x:u,y:p,startPi:a,endPi:c}),x){let r,l;"donut"===n&&(r=e-t/4+g/2,l=t/2+g),"pie"===n&&(r=e-t/6+g/2,l=2*r),m.push({radius:r,width:l,color:s(i[o].color,-50+g),x:u,y:p,startPi:a,endPi:c})}for(let t=0;t<=m.length-1;t++)f.save(),f.beginPath(),f.strokeStyle=m[t].color,f.lineWidth=m[t].width,f.fillStyle="transparent",f.arc(m[t].x,m[t].y,m[t].radius>0?m[t].radius:0,m[t].startPi,m[t].endPi),f.fill(),f.stroke(),f.restore()}if(r.texts.slicePercent.enable)for(let o=0;o<=i.length-1;o++){f.font="100 "+r.texts.slicePercent.styles.fontSize+"px arial",f.textAlign="center",f.textBaseline="middle",f.fillStyle=r.texts.slicePercent.styles.color;let l=e,s=r.data.hover.value*i[o].state;"donut"===n&&x&&(l+=t/4+s),"donut"!==n||x||(l+=s/2),"pie"===n&&x&&(l+=t/3+s),"pie"!==n||x||(l+=s/2);let h=parseFloat(i[o].percent.toFixed(2))+"%",d=a(u,p,l,(i[o].startPi+i[o].endPi)/2);f.fillText(h,d.x,d.y)}r.texts.center.enable&&(f.font="800 "+r.texts.center.styles.fontSize*d.loading+"px arial",f.textAlign="center",f.textBaseline="middle",f.fillStyle=r.texts.center.styles.color,f.fillText(r.texts.center.text,u,p))}drawTooltip(){let t=this.data.find((t=>t.hovered));t&&super.drawTooltip({title:{text:t.label},panels:[{colorPanel:{color:t.color},texts:[{text:"Value: "+t.value},{text:"Percent: "+t.percent.toFixed(2)+"%"}],footer:{text:"Total: "+t.total}}],render:t=>{}})}render(t={}){this.renderTimeout&&clearTimeout(this.renderTimeout),this.renderTimeout=setTimeout((()=>{super.baseRender(),this.drawSlices(),this.drawTooltip()}),5)}}class x extends p{constructor(t){t.type="donut",super(t)}}class y extends p{constructor(t){t.type="pie",super(t)}}var b={offset:{top:40,right:40,bottom:40,left:40},scheme:{count:4,styles:{width:2,color:"#2b2a49"}},labels:{enable:!0,offset:15,styles:{fontSize:14,color:"#ffffff"}},data:{line:{styles:{width:2}},dots:{enable:!0,styles:{width:3,hover:{width:5}}}}};class v extends c{constructor(t){t.defaultSettings=b,super(t)}prepareData(t={}){let e=t.labels;return t.datasets.forEach(((t,o)=>{if(t.color=t.color||l(),t.state=t.state||0,t.values.length>e.length&&(t.values.length=e.length),t.values.length<e.length)for(let o=t.values.length;o<e.length;o++)t.values.push(0);t.values=t.values.map(((t,e)=>({value:t,parentIndex:o,index:e})))})),t}getCoords(){let{canvas:t,settings:e,data:o}=this,{context:r,element:i}=t,l=Math.min(i.clientHeight-e.offset.top-e.offset.bottom,i.clientWidth-e.offset.left-e.offset.right);return{width:l,widthHalf:l/2,x:i.clientWidth/2+e.offset.left-e.offset.right,y:i.clientHeight/2+e.offset.top-e.offset.bottom,piStart:-Math.PI/2,piPart:2*Math.PI/o.labels.length}}drawTooltip(){let t=this.data.datasets.map((t=>t.values)).flat(),{labels:e}=this.data,o=t.filter((t=>t.hovered));o.length&&super.drawTooltip({title:{text:e[o[0].index]},panels:o.map((t=>({colorPanel:{color:this.data.datasets[t.parentIndex].color},texts:[{text:"Value: "+t.value}],footer:{text:this.data.datasets[t.parentIndex].name}}))),render:t=>{}})}drawScheme(){let{canvas:t,settings:e,data:o,cursor:r,type:i,state:l}=this,{context:s,element:n}=t,{scheme:h}=e,d=this.getCoords();for(let t=0;t<=o.labels.length-1;t++){let e=a(d.x,d.y,d.widthHalf,d.piStart+d.piPart*t);s.strokeStyle=h.styles.color,s.lineWidth=h.styles.width,s.beginPath(),s.moveTo(d.x,d.y),s.lineTo(e.x,e.y),s.fill(),s.stroke();for(let e=0;e<=h.count;e++){let o=d.widthHalf/h.count,r=a(d.x,d.y,d.widthHalf-o*e,d.piStart+d.piPart*t),i=a(d.x,d.y,d.widthHalf-o*e,d.piStart+d.piPart*(t-1));s.beginPath(),s.moveTo(r.x,r.y),s.lineTo(i.x,i.y),s.fill(),s.stroke()}}}drawLabels(){let{canvas:t,settings:e,data:o,cursor:r,type:i,state:l}=this,{context:s,element:n}=t,{labels:h}=e,d=this.getCoords();for(let t=0;t<=o.labels.length-1;t++)if(h.enable){s.save();let e=a(d.x,d.y,d.widthHalf+h.offset,d.piStart+d.piPart*t),r=o.labels[t]||"";s.globalAlpha=1*l.loading,s.font="100 "+h.styles.fontSize*l.loading+"px arial",s.textAlign=e.x>d.x?"left":e.x<d.x?"right":"center",s.textBaseline="middle",s.fillStyle=h.styles.color,s.fillText(r,e.x,e.y),s.restore()}}drawData(){let{canvas:t,settings:e,data:o,cursor:r,type:i,state:l}=this,{context:s,element:n}=t,d=this.getCoords(),f=o.datasets.map((t=>t.values)).flat().map((t=>t.value)),c=Math.max(...f);for(let t=0;t<=o.datasets.length-1;t++){let i=o.datasets[t];s.strokeStyle=i.color,s.fillStyle=i.color,s.lineWidth=e.data.line.styles.width,s.beginPath();for(let t=0;t<=i.values.length-1;t++){let e=i.values[t],o=e.value/c,r=a(d.x,d.y,d.widthHalf*o*l.loading,d.piStart+d.piPart*t);e.coords=r,0===t?s.moveTo(r.x,r.y):s.lineTo(r.x,r.y)}s.globalAlpha=.5,s.fill(),s.globalAlpha=1,s.closePath(),s.stroke();for(let t=0;t<=i.values.length-1;t++){let o=i.values[t],n=o.value/c,f=a(d.x,d.y,d.widthHalf*n*l.loading,d.piStart+d.piPart*t),g=[{x:d.x,y:d.y},a(d.x,d.y,d.widthHalf,d.piStart+d.piPart*t-d.piPart/2),a(d.x,d.y,d.widthHalf,d.piStart+d.piPart*t),a(d.x,d.y,d.widthHalf,d.piStart+d.piPart*t+d.piPart/2)];if(o.hovered=h({polygon:g,x:r.x,y:r.y}),super.hover({item:o,isHovered:o.hovered}),e.data.dots.enable){let t=e.data.dots.styles.width*l.loading;o.hasOwnProperty("state")&&(t+=(e.data.dots.styles.hover.width-e.data.dots.styles.width)*o.state),s.beginPath(),s.arc(f.x,f.y,t,0,2*Math.PI),s.fill(),s.closePath(),s.stroke()}}}}render(t={}){this.renderTimeout&&clearTimeout(this.renderTimeout),this.renderTimeout=setTimeout((()=>{super.baseRender(),this.drawScheme(),this.drawLabels(),this.drawData(),this.drawTooltip()}),5)}}var m={offset:{top:30,right:30,bottom:30,left:30},label:{enable:!0,styles:{fontSize:14,color:"#fff"}},value:{enable:!0,styles:{fontSize:14,color:"#fff"}},area:{gradient:!1,smooth:!0},hover:{enable:!0,value:15}};class w extends c{constructor(t){t.defaultSettings=m,super(t)}prepareData(t=[]){return t.forEach((t=>{t.color=t.color||l(),t.state=t.state||0})),t}drawTooltip(){let{data:t}=this,e=t.find((t=>t.hovered));e&&super.drawTooltip({title:{text:e.label},panels:[{colorPanel:{color:e.color},texts:[{text:"Value: "+e.value}]}],render:t=>{}})}getDrawRect(){let{canvas:t,settings:e,data:o}=this,{element:r}=t,i={xStart:e.offset.left,xEnd:r.clientWidth-e.offset.right,yStart:e.offset.top,yEnd:r.clientHeight-e.offset.bottom};return i.width=i.xEnd-i.xStart,i.height=i.yEnd-i.yStart,i.center=i.xStart+i.width/2,i.partHeight=i.height/o.length,i}drawFunnel(){let{canvas:e,settings:o,data:r,cursor:i,type:l,state:a}=this,{context:n,element:d}=e,f=Math.max(...r.map((t=>t.value))),c=this.getDrawRect();r=this.prepareData(r);let g=[],u=[];for(let e=0;e<=r.length-1;e++){let l=r[e],d=r[e+1],p=r[e-1],x=c.yStart+c.partHeight*e,y=x+c.partHeight,b=l.value/f*c.width,v=d?d.value/f*c.width:b;b*=a.loading,v*=a.loading,n.beginPath(),n.strokeStyle="transparent";let m=s(l.color,o.hover.enable&&l.state?o.hover.value*l.state:1);if(o.area?.gradient){let e=d?s(d.color,o.hover.enable&&d.state?o.hover.value*d.state:1):m,r=p?s(p.color,o.hover.enable&&p.state?o.hover.value*p.state:1):m,i=n.createLinearGradient(0,x,0,y);i.addColorStop(0,t([r,m])),i.addColorStop(.3,m),i.addColorStop(.7,m),i.addColorStop(1,t([m,e])),m=i}n.fillStyle=n.strokeStyle=m;let w=[{x:c.center-b/2,y:x},{x:c.center-v/2,y:y},{x:c.center+v/2,y:y},{x:c.center+b/2,y:x}];e||(g.push([w[0].x,w[0].y]),u.push([w[3].x,w[3].y])),g.push([w[1].x,w[1].y]),u.push([w[2].x,w[2].y]);for(let t=0;t<=w.length-1;t++)0===t?n.moveTo(w[t].x,w[t].y):n.lineTo(w[t].x,w[t].y);n.fill(),n.closePath(),n.stroke(),l.hovered=h({polygon:w,x:i.x,y:i.y}),super.hover({item:l,isHovered:l.hovered}),n.save();let S=c.center,P=y-(y-x)/2;n.globalAlpha=1*a.loading,o.label?.enable&&(n.font="100 "+o.label.styles.fontSize*a.loading+"px arial",n.fillStyle=o.label.styles.color,n.textAlign="center",n.textBaseline="middle",n.fillText(l.label,S,x+o.label.styles.fontSize+5)),o.value?.enable&&(n.font="100 "+o.value.styles.fontSize*a.loading+"px arial",n.fillStyle=o.value.styles.color,n.textAlign="center",n.textBaseline="middle",n.fillText(l.value,S,P)),n.restore()}u.reverse()}render(t={}){this.renderTimeout&&clearTimeout(this.renderTimeout),this.renderTimeout=setTimeout((()=>{super.baseRender(),this.drawFunnel(),this.drawTooltip()}),5)}}var S={count:2,top:{count:6},styles:{width:2,color:"#2b2a49"},offset:{top:30,right:30,bottom:30,left:30}};class P extends c{constructor(t){t.defaultSettings=S,super(t)}getCoords(){let{canvas:t,settings:e}=this,{context:o,element:r}=t,i=Math.min(r.clientHeight-e.offset.top-e.offset.bottom,r.clientWidth-e.offset.left-e.offset.right);return{width:i,widthHalf:i/2,x:r.clientWidth/2+e.offset.left-e.offset.right,y:r.clientHeight/2+e.offset.top-e.offset.bottom,piStart:-Math.PI/2,piPart:2*Math.PI/e.top.count}}drawTooltip(){}draw(){const{canvas:t,settings:e}=this,{styles:o,count:r,top:i}=e,{context:l}=t,s=this.getCoords();for(let t=0;t<=r-1;t++){l.strokeStyle=o.color,l.lineWidth=o.width,l.beginPath();for(let t=0;t<=i.count-1;t++){let e=a(s.x,s.y,s.widthHalf*Math.min(1,Math.random()+.3),s.piStart+s.piPart*t);t?l.lineTo(e.x,e.y):l.moveTo(e.x,e.y)}l.closePath(),l.stroke()}}render(t={}){this.renderTimeout&&clearTimeout(this.renderTimeout),this.renderTimeout=setTimeout((()=>{super.baseRender(),this.draw(),this.drawTooltip()}),5)}}var T={Plot:g,Donut:x,Pie:y,Radar:v,Funnel:w,Spectr:P};window.bChart={Plot:g,Donut:x,Pie:y,Radar:v,Funnel:w,Spectr:P}}(),r}()}));
//# sourceMappingURL=bundle.js.map